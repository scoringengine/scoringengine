{% extends 'base.html' %}
{% block title %}Welcome{% endblock %}
{% block head %}
    {{ super() }}
    <link href="{{ url_for('static', filename='css/main.css') }}" rel="stylesheet">
    <style>
      .sponsor-card {
        transition: transform 0.2s ease-in-out;
      }
      .sponsor-card:hover {
        transform: scale(1.02);
      }
      .sponsor-logo {
        max-height: 120px;
        max-width: 100%;
        object-fit: contain;
      }
      .sponsor-tier-header {
        border-bottom: 2px solid;
        padding-bottom: 0.5rem;
        margin-bottom: 1.5rem;
      }
      .tier-diamond { border-color: #b9f2ff; color: #00bcd4; }
      .tier-platinum { border-color: #e5e4e2; color: #9e9e9e; }
      .tier-gold { border-color: #ffd700; color: #f9a825; }
      .tier-silver { border-color: #c0c0c0; color: #757575; }
      .tier-bronze { border-color: #cd7f32; color: #8d6e63; }
      .tier-default { border-color: #6c757d; color: #495057; }
    </style>
{% endblock %}
{% block content %}
<div class="container md-page">
  {% if use_legacy %}
    {{ welcome_content|safe }}
  {% else %}
    {# Welcome Message #}
    {% if welcome_config.welcome_message %}
    <div class="welcome-message mb-5">
      {{ welcome_config.welcome_message|safe }}
    </div>
    {% endif %}

    {# Sponsor Tiers #}
    {% for tier in welcome_config.sponsor_tiers %}
      {% if tier.sponsors %}
      <div class="sponsor-tier mb-5">
        {% set tier_class = 'tier-' + tier.name|lower if tier.name|lower in ['diamond', 'platinum', 'gold', 'silver', 'bronze'] else 'tier-default' %}
        <h2 class="text-center sponsor-tier-header {{ tier_class }}">
          {{ tier.name }} Sponsor{{ 's' if tier.sponsors|length != 1 else '' }}
        </h2>
        <div class="row justify-content-center g-4">
          {% for sponsor in tier.sponsors %}
          <div class="col-12 col-sm-6 col-md-4 col-lg-3">
            <div class="card h-100 sponsor-card text-center">
              {% if sponsor.website %}
              <a href="{{ sponsor.website }}" target="_blank" rel="noopener noreferrer" class="text-decoration-none">
              {% endif %}
                <div class="card-body d-flex flex-column justify-content-center align-items-center">
                  {% if sponsor.logo_url %}
                  <img src="{{ sponsor.logo_url }}" alt="{{ sponsor.name }}" class="sponsor-logo mb-2">
                  {% else %}
                  <div class="text-muted mb-2" style="font-size: 3rem;">
                    <i class="bi bi-building"></i>
                  </div>
                  {% endif %}
                  <h5 class="card-title mb-0 text-body">{{ sponsor.name }}</h5>
                </div>
              {% if sponsor.website %}
              </a>
              {% endif %}
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
      {% endif %}
    {% endfor %}

    {# Show placeholder if no sponsors configured #}
    {% set has_any_sponsors = namespace(value=false) %}
    {% for tier in welcome_config.sponsor_tiers %}
      {% if tier.sponsors %}
        {% set has_any_sponsors.value = true %}
      {% endif %}
    {% endfor %}

    {% if not welcome_config.welcome_message and not has_any_sponsors.value %}
    <div class="text-center py-5">
      <h2>Welcome to the Competition!</h2>
      <p class="text-muted">Check back soon for updates and sponsor information.</p>
    </div>
    {% endif %}
  {% endif %}
</div>
{% endblock %}

