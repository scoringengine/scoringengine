<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  {% block head %}
  <title>Scoring Engine - {% block title %}{% endblock %}</title>
  <script src="{{ url_for('static', filename='vendor/js/jquery.min.js') }}"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  {% endblock %}
  <link rel="shortcut icon" href="{{ url_for('static', filename='images/favicon.ico') }}">
  <link href="{{ url_for('static', filename='css/main.css') }}" rel="stylesheet">
</head>
<body class="{% if 'unauthorized' in request.path %}bg-red-500{% else %}bg-gray-100{% endif %}">
  <script>
    $(document).ready(function () {
      $("#alert-info").fadeTo(2000, 500).slideUp(500, function () {
        $("#alert-info").slideUp(500);
      });
    });
  </script>
  {% set flash_colors = {'success':'green','danger':'red','warning':'yellow','info':'blue'} %}
  {% for category, message in get_flashed_messages(with_categories=true) %}
  <div id="alert-info" class="text-white px-4 py-2 bg-{{ flash_colors.get(category, 'blue') }}-500">
    <strong>{{ message }}</strong>
  </div>
  {% endfor %}
  <nav class="bg-gray-800">
    <div class="max-w-7xl mx-auto px-4">
      <div class="flex items-center justify-between h-16">
        <div class="flex items-center space-x-4">
          <a class="text-white font-semibold" href="/">Scoring Engine</a>
          <a class="text-gray-300 hover:text-white {% if request.path == '/scoreboard' %}font-bold text-white{% endif %}" href="{{ url_for('scoreboard.home') }}">Scoreboard</a>
          <a class="text-gray-300 hover:text-white {% if request.path == '/overview' %}font-bold text-white{% endif %}" href="{{ url_for('overview.home') }}">Overview</a>
          {% if current_user.is_authenticated %}
            {% if current_user.is_blue_team %}
            <a class="text-gray-300 hover:text-white {% if request.path == '/services' %}font-bold text-white{% endif %}" href="{{ url_for('services.home') }}">Services</a>
            {% endif %}
            {% if current_user.is_blue_team or current_user.is_red_team %}
            <a class="text-gray-300 hover:text-white {% if request.path == '/injects' %}font-bold text-white{% endif %}" href="{{ url_for('injects.home') }}">Injects</a>
            {% endif %}
            {% if current_user.is_blue_team or current_user.is_white_team %}
            <a class="text-gray-300 hover:text-white {% if request.path == '/stats' %}font-bold text-white{% endif %}" href="{{ url_for('stats.home') }}">Stats</a>
            {% endif %}
            {% if current_user.is_red_team or current_user.is_white_team %}
            <a class="text-gray-300 hover:text-white {% if request.path == '/flags' %}font-bold text-white{% endif %}" href="{{ url_for('flags.home') }}">Flags</a>
            {% endif %}
            {% if current_user.is_white_team %}
            <a class="text-gray-300 hover:text-white {% if 'admin' in request.path %}font-bold text-white{% endif %}" href="{{ url_for('admin.status') }}">Admin</a>
            {% endif %}
          {% endif %}
        </div>
        <div class="flex items-center space-x-4">
          {% if not current_user.is_authenticated %}
          <a class="text-gray-300 hover:text-white" href="{{ url_for('auth.login') }}">Login</a>
          {% else %}
          <div class="relative group">
            <a class="text-gray-300 hover:text-white cursor-pointer">{{ current_user.get_username }}</a>
            <div class="absolute right-0 hidden group-hover:block bg-white text-gray-700 mt-2 rounded shadow-lg">
              <a class="block px-4 py-2 hover:bg-gray-100" href="{{ url_for('profile.home') }}">Profile</a>
              <div class="border-t"></div>
              <a class="block px-4 py-2 hover:bg-gray-100" href="{{ url_for('auth.logout') }}">Logout</a>
            </div>
          </div>
          {% endif %}
          <a class="text-gray-300 hover:text-white" href="{{ url_for('about.about') }}">About</a>
        </div>
      </div>
    </div>
  </nav>
  {% block content %}{% endblock %}
</body>
</html>
