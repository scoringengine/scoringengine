{% extends 'base.html' %}
{% block title %}Services{% endblock %}
{% block head %}
    {{ super() }}
    <script src="//cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js"></script>
    <script src="//cdn.datatables.net/1.10.12/js/dataTables.bootstrap.min.js"></script>
    <link rel="stylesheet" href="//cdn.datatables.net/1.10.12/css/dataTables.bootstrap.min.css" />
{% endblock %}
{% block content %}
<div class="container">
    <div class="row">
    <h3>{{team.name}}</h3>
    <h5>Place: {{team.place}}</h5>
    <h5>Score: {{team.current_score}} points</h5>
    <table id="services" class="table table-striped table-bordered table-compact" cellspacing="0" width="100%">
        <thead>
            <tr>
                <th>Service</th>
                <th>Status</th>
                <th>Score Earned</th>
                <th>Max Score</th>
                <th>% Earned</th>
                <th>Trending</th>
            </tr>
        </thead>
        <tbody>
            {% for service in team.services %}
            <tr>
                <td><a href="/service/{{service.id}}">{{service.name}}</a></td>
                {% if not service.checks %}
                  <td><span class="label label-default">Undetermined</span></td>
                {% else %}
                    {% if service.last_check_result() %}
                      <td><span class="label label-success">UP</span></td>
                    {% else %}
                      <td><span class="label label-danger">DOWN</span></td>
                    {% endif %}
                {% endif %}
                <td>{{service.score_earned}}</td>
                <td>{{service.max_score}}</td>
                <td>{{service.percent_earned}}</td>
                <td>
                {% for check in service.last_ten_checks[::-1] %}
                    {% if check.result %}
                        <span class="glyphicon glyphicon-ok" style="color:green"></span>
                    {% else %}
                        <span class="glyphicon glyphicon-remove" style="color:red"></span>
                    {% endif %}
                {% endfor %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
        </table>
        <script>
            $(document).ready(function() {
                $('#services').DataTable({
                    'paging': false,
                    'bFilter': false,
                    'bInfo': false
                });
            } );
        </script>
    </div>
</div>
{% endblock %}
